<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perfil</title>
  <link rel="stylesheet" href="css/perfil_ps.css?v=1.0.4">
  <link rel="icon" href="images/favicon.ico" type="images/x-icon">
  <link rel="manifest" href="manifest.json">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="perfil-top">
    <button class="btn-back" onclick="window.history.back()">&#8592;</button>
    <h2 id="user-nome" class="perfil-nome"></h2>
  </div>
  <div class="perfil-detalhes container mt-4">
    <p><strong>Nome:</strong> <span id="nome"></span></p>
    <p><strong>Nº Cédula: </strong> <span id="numero_cedula"></span></p>
    <p><strong>E-mail:</strong> <span id="email"></span></p>
    <p><strong>Telemóvel:</strong> <span id="telemovel"></span></p>
    <p><strong>Data de Nascimento:</strong> <span id="nasc"></span></p>
    <button class="btn-editar" data-bs-toggle="modal" data-bs-target="#modalEditar">Editar Perfil</button>
  </div>

<div class="modal fade" id="modalEditar" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content modal-editar">
      <form id="editar-form">
        <div class="modal-header modal-editar-header">
          <h5 class="modal-title">✏️ Editar Perfil</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body modal-editar-body">
          <input class="form-control mb-3" id="edit-nome" placeholder="Nome" />
          <input class="form-control mb-3" id="edit-cedula" placeholder="Nº de Cédula" />
          <input class="form-control mb-3" id="edit-email" placeholder="Email" />
          <input class="form-control mb-3" id="edit-telemovel" placeholder="Telemóvel" />
          <input class="form-control mb-3" id="edit-nasc" type="date" />
        </div>
        <div class="modal-footer justify-content-end">
          <button type="submit" class="btn btn-agendar">Guardar</button>
        </div>
      </form>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script type="module" src="js/perfil_ps.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/js/service-worker.js')
        .then(reg => console.log("✅ Service Worker registado:", reg.scope))
        .catch(err => console.error("❌ Falha ao registar Service Worker:", err));
    });
  }
</script>
</body>
</html>
